---
// Reading Progress Component
// Displays a progress bar at the top of the screen to show reading progress
---

<div class="reading-progress">
  <div class="progress-bar"></div>
</div>

<script>
  const updateProgress = () => {
    const scrollTop = window.scrollY;
    const docHeight =
      document.documentElement.scrollHeight - window.innerHeight;
    const progress = Math.min(Math.max(scrollTop / docHeight, 0), 1);

    const progressBar = document.querySelector(".progress-bar");
    if (progressBar) {
      progressBar.style.width = `${progress * 100}%`;
    }
  };

  // Add scroll listener with throttling
  let ticking = false;
  window.addEventListener("scroll", () => {
    if (!ticking) {
      window.requestAnimationFrame(() => {
        updateProgress();
        ticking = false;
      });
      ticking = true;
    }
  });
</script>

<style>
  .reading-progress {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 3px;
    background-color: transparent;
    z-index: 1000;
    pointer-events: none;
  }

  .progress-bar {
    height: 100%;
    background: linear-gradient(90deg, var(--accent) 0%, var(--accent) 100%);
    border-radius: 0 0 1.5rem 0;
    transition: width 0.1s ease;
  }

  :global(:root.dark) .progress-bar {
    background: linear-gradient(90deg, #000d8a 0%, #000d8a 100%);
  }
</style>
